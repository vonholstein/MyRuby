# Write a generator that yields primes
# dd

require 'set'

class PrimeGenerator
  include Enumerable
  def each
    current_candidate = 1
    loop do
      current_candidate += 1
      flag = false
      (2..Math.sqrt(current_candidate).to_i).each do |k|
        if current_candidate%k == 0
          flag = true
          break
        end        
      end
      yield current_candidate if !flag      
    end    
  end  
end

prime_numbers = Set.new

PrimeGenerator.new.each do |x|
  if x < 1000000
    prime_numbers << x
  else
    break
  end
end
